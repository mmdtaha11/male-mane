# -*- coding: utf-8 -*-

import logging
import random
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    Application, 
    CommandHandler, 
    CallbackQueryHandler, 
    MessageHandler, 
    filters, 
    ContextTypes, 
    PicklePersistence
)

# --- ุชูุธูุงุช ุงููู ---
BOT_TOKEN = "7440922727:AAEMmpc3V-wvHDifg9uCV4h0mXxk_IqIqh4"
ADMIN_IDS = [5044871490, 5107444649]

logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s", level=logging.INFO
)
logger = logging.getLogger(__name__)

# --- ุฏุงุฏูโูุง ุณูุงูุงุช ู ฺฏุฑููโูุง (ุจุฏูู ุชุบุฑ) ---
QUESTIONS = [
    {
        "text": "๐งฉ ุณุคุงู ฑ\n\nููุช ุจู ุฏู ุฏูุณุชุช ุงุฎุชูุงู ูพุด ูุงุฏุ ูุนูููุงู ฺโฺฉุงุฑ ูโฺฉูุ",
        "answers": [
            {"text": "ุณุน ูโฺฉูู ูุฑ ุฏู ุทุฑู ุฑู ุขุฑูู ฺฉูู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ุงูู ฺฏูุด ูโุฏูุ ุจุนุฏ ุชุตูู ูโฺฏุฑู ฺฉุฏูู ุญู ุฏุงุฑู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ููโุฎูุงู ุฏุฑฺฏุฑ ุดูุ ูู ุงุฏู ูโูููู ฺฉ ุจุงุนุซ ุฏุฑุฏุณุฑ ุดุฏ.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ุณุน ูโฺฉูู ฺฉูุชุฑู ูููุนุช ุฑู ุจฺฏุฑู ุชุง ุฏุนูุง ุชููู ุดู.", "scores": {"angel": 0, "human": 1, "demon": 1}},
            {"text": "ฺฉุงุฑ ูโฺฉูู ูุฑ ุฏู ุจูููู ฺฉู ุจโูุงุฏู ุจูุฏ ุจุญุซ ฺฉูู.", "scores": {"angel": 1, "human": 1, "demon": 0}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ฒ\n\nููุช ุงุดุชุจุงู ุจุฒุฑฺฏ ูโฺฉูุ ุงููู ูฺฉุฑุช ฺูุ",
        "answers": [
            {"text": "ุจุงุฏ ุฌุจุฑุงูุด ฺฉููุ ุญุช ุงฺฏู ุณุฎุชู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ููู ุงุดุชุจุงู ูโฺฉููุ ููู ุงูู ุงุฏ ุจฺฏุฑู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ูุจุงุฏ ุจุฐุงุฑู ฺฉุณ ุจูููู.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ุฏูุง ูุงุนุงุฏููุ ูู ุจุงุฏ ููโุชุฑ ุดู.", "scores": {"angel": 0, "human": 1, "demon": 1}},
            {"text": "ุดุงุฏ ุงู ุงุดุชุจุงู ุฏูู ุฎุงุต ุฏุงุดุชู.", "scores": {"angel": 1, "human": 1, "demon": 0}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ณ\n\nุชู ุฎููุชุช ุจุดุชุฑ ุจู ฺ ูฺฉุฑ ูโฺฉูุ",
        "answers": [
            {"text": "ุขูุฏูโุง ุจูุชุฑ ุจุฑุง ููู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ุฑุงู ุจุฑุง ูพุดุฑูุช ุฎูุฏู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ุงูฺฉู ฺูโุทูุฑ ูุดู ุฏฺฏุฑุงู ุฑู ุฏุฑฺฉ ฺฉุฑุฏ.", "scores": {"angel": 1, "human": 1, "demon": 0}},
            {"text": "ฺฉูุชุฑู ู ูุฏุฑุช ฺฉู ูููุฒ ูุฏุงุฑู.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ุงูฺฉู ุฏูุง ฺุฑุง ุงูโูุฏุฑ ุจโูุธู ู ุจโุฑุญูู.", "scores": {"angel": 0, "human": 1, "demon": 1}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ด\n\nููุช ู ููุฑ ูุงุงูุฏ ู ุฎุณุชูโุณุชุ ฺุทูุฑ ุฑูุชุงุฑ ูโฺฉูุ",
        "answers": [
            {"text": "ุจุงูุงุด ุญุฑู ูโุฒูู ุชุง ุญุณ ุจูุชุฑ ูพุฏุง ฺฉูู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ุจูุด ุงุฏุขูุฑ ูโฺฉูู ฺฉู ุฎูุฏุด ุจุงุฏ ูู ุจูููู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ุงฺฏู ุฎูุฏุด ุฎูุงุณุชุ ฺฉูฺฉุด ูโฺฉูู.", "scores": {"angel": 1, "human": 1, "demon": 0}},
            {"text": "ุณฺฉูุช ูโฺฉููุ ุจุนุถ ฺุฒุง ูุงุฒ ุจู ุญุฑู ูุฏุงุฑู.", "scores": {"angel": 0, "human": 1, "demon": 1}},
            {"text": "ูโุฐุงุฑู ุฎูุฏุด ุชุง ุชู ุณููุท ุจุฑูุ ฺูู ููุท ุงููุทูุฑ ุฑุดุฏ ูโฺฉูู.", "scores": {"angel": 0, "human": 0, "demon": 2}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ต\n\nฺฉุฏูู ุฌููู ุจุดุชุฑ ุดุจู ุทุฑุฒ ูฺฉุฑุช ูุณุชุ",
        "answers": [
            {"text": "ููุฑ ููุดู ุฏุฑ ุชุงุฑฺฉ ูู ุฑุงู ูพุฏุง ูโฺฉูู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ูฺ ฺุฒ ูุทูู ูุณุชุ ููุท ุงูุชุฎุงุจโูุง ูููู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ูุฏุฑุช ุนู ุขุฒุงุฏ.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ูููโฺุฒ ุจูุง ุฏุงุฑูุ ุญุช ุฎูุจ.", "scores": {"angel": 0, "human": 1, "demon": 1}},
            {"text": "ุนุฏุงูุช ุจุฏูู ุงุญุณุงุณุ ุจโุงุฑุฒุดู.", "scores": {"angel": 1, "human": 1, "demon": 0}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ถ\n\nููุช ู ููุฑ ุจโุฏูู ุงุฒุช ูุชููุฑูุ ฺู ูุงฺฉ-ูุด ูุดูู ูโุฏุ",
        "answers": [
            {"text": "ุณุน ูโฺฉูู ุฏููุด ุฑู ุจูููู.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ุจุฑุงู ููู ูุณุชุ ูุฑฺฉุณ ูุธุฑ ุฎูุฏุด ุฑู ุฏุงุฑู.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ุงุฒุด ุงุณุชูุงุฏู ูโฺฉูู ุชุง ููโุชุฑ ุดู.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ููุท ูุจุฎูุฏ ูโุฒูู โ ููุฑุชุด ุฎูุฏุด ุฑู ูโุณูุฒููู.", "scores": {"angel": 1, "human": 0, "demon": 1}},
            {"text": "ุจูุด ูุดูู ูโุฏู ฺฉู ุงุดุชุจุงู ฺฉุฑุฏู.", "scores": {"angel": 0, "human": 1, "demon": 1}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ท\n\nุฏุฑ ุงูุชุฎุงุจ ุจู ยซุขุฑุงูุดยป ู ยซูุฏุฑุชยปุ ฺฉุฏูู ุฑู ุชุฑุฌุญ ูโุฏุ",
        "answers": [
            {"text": "ุขุฑุงูุดุ ฺูู ุจุฏููุด ูฺ ุงุฑุฒุด ูุณุช.", "scores": {"angel": 2, "human": 0, "demon": 0}},
            {"text": "ูุฏุฑุชุ ฺูู ุจุงูุงุด ูุดู ุงุฒ ุขุฑุงูุด ูุญุงูุธุช ฺฉุฑุฏ.", "scores": {"angel": 0, "human": 2, "demon": 0}},
            {"text": "ูฺโฺฉุฏูู ูุทูู ูุณุชุ ุจุงุฏ ุจูุด ุชุนุงุฏู ุณุงุฎุช.", "scores": {"angel": 1, "human": 1, "demon": 0}},
            {"text": "ูุฏุฑุชุ ฺูู ููุท ููโูุง ุฒูุฏู ูโูููู.", "scores": {"angel": 0, "human": 0, "demon": 2}},
            {"text": "ุขุฑุงูุดุ ุงูุง ูู ุจู ููุช ุณฺฉูุช ุฏุฑ ุจุฑุงุจุฑ ุธูู.", "scores": {"angel": 1, "human": 0, "demon": 1}},
        ],
    },
    {
        "text": "๐งฉ ุณุคุงู ธ\n\nููุช ููู ุนูู ุชู ูุณุชูุ ฺุทูุฑ ุงุฏุงูู ูโุฏุ",
        "answers": [
            {"text": "ุจุง ุงูุงู ุจู ุฎูุฏู ูพุด ูโ
